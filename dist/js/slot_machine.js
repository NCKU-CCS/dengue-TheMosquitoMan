!function(e){function n(e){var n={},s=e.length,o=Math.floor(Math.random()*s),a=l(e[o].phone),i=t(e[o].name);return n.luckyArray=a.array,n.phone=a.str,n.name=i,n.trueName=e[o].name,n.truePhone=e[o].phone,console.log(n),e.splice(o,1),n}function t(e){var n=e.substr(0,1);if(e.length>=3){for(var t=0;t<e.length-2;t++)n+="X";n+=e.substr(e.length-1,1)}else n+="X";return n}function l(e){var n=e.split("").slice(2);return n.splice(2,3,"X","X","X"),{array:n,str:e.slice(0,4)+"XXX"+e.slice(7)}}function s(){var e="#"+this.id;$(e).removeClass("slot_move"),$(e).addClass("slot_final"),d++,d===f.length&&(r(),$(".list_box").append("<p> "+_.name+" </p>"))}function o(e,n){$("#name").text(e),$("#phone").text(n),a(e,n)}function a(e,n){_.name=e,_.phone=n}function i(){f.forEach(function(e){e.start(),$(e.el).removeClass("slot_final"),$(e.el).addClass("slot_move")}),$(".slot_machine").removeClass("disabled"),$(".section_led").addClass("disabled"),$(".draw_bot").removeClass("wink"),$(".slot_final").removeClass("draw_final_twinkle"),$(".btn_draw").toggleClass("clicked")}function r(){$(".slot_final").addClass("draw_final_twinkle"),$(".draw_bot").addClass("wink"),$(".btn_draw").toggleClass("clicked"),$(".btn_draw").text("繼續抽")}function c(){$(".btn_draw").text("開始"),$(".btn_draw").removeClass("clicked"),$(".draw_bot").removeClass("wink"),$(".slot_t").removeClass("draw_final_twinkle"),$(".slot_machine").addClass("disabled"),$(".section_led").removeClass("disabled"),f.forEach(function(e){e.reset(),$(e.el).removeClass("slot_move slot_final")})}var d=0,f=[new Slot("#slot1",20,35,386),new Slot("#slot2",45,20,400),new Slot("#slot3",70,30,500),new Slot("#slot4",35,25,250),new Slot("#slot5",50,15,222),new Slot("#slot6",15,25,333),new Slot("#slot7",30,13,300),new Slot("#slot8",40,50,111)],_={name:"",phone:""};$(".btn_draw").click(function(){if("開始"===this.innerHTML||"繼續抽"===this.innerHTML)i(),this.innerHTML="～停～";else{var e=n(items);d=0,this.innerHTML="即將揭曉...",o(e.name,e.phone),f.forEach(function(n,t){n.stop(e.luckyArray[t])})}}),$(".btn_reset").click(function(){c()}),$(".list").click(function(){$(".list").toggleClass("list_show")}),function(){f.forEach(function(e,n){document.getElementById("slot"+(n+1)).addEventListener("isFinal",s,!1)})}(e)}(window);